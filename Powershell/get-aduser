# Define the list of users and servers
$users = "User1", "User2", "User3"
$servers = "Server1", "Server2", "Server3"

# Create an empty array to store results
$results = @()

# Iterate through each user
foreach ($user in $users) {
    $userResult = [PSCustomObject]@{
        User = $user
        LastLogonDate = "Not Found"
    }

    # Iterate through each server
    foreach ($server in $servers) {
        try {
            # Attempt to get the last logon date for the user on the current server
            $lastLogon = Get-ADUser $user -Server $server -Properties LastLogonDate | Select-Object -ExpandProperty LastLogonDate

            # If the last logon date is found, update the result
            if ($lastLogon) {
                $userResult.LastLogonDate = $lastLogon
                break
            }
        } catch {
            # Handle any errors (e.g., user not found on the server)
        }
    }

    # Add the user result to the results array
    $results += $userResult
}

# Display the results as a table
$results | Format-Table -AutoSize
